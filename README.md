# 情绪疗愈小程序

一个基于微信小程序的情绪记录与分析应用，帮助用户更好地了解和管理自己的情绪状态。

## ✨ 功能特色

### 📊 核心功能
- **多模态情绪记录**: 支持表情、颜色、天气三种输入方式
- **智能数据分析**: Canvas图表展示情绪趋势和统计
- **AI洞察服务**: 云端AI分析提供个性化建议
- **模式识别**: 发现时间、触发因素等情绪模式

### 👤 用户系统
- **个人中心**: 用户资料管理和统计概览
- **成就系统**: 21种成就徽章，10级经验等级
- **隐私保护**: 三层隐私设置，数据安全可控
- **数据同步**: 本地+云端混合存储策略

### 🌐 社区互动
- **动态分享**: 匿名或实名发布情绪动态
- **互动评论**: 点赞、评论、分享功能
- **话题系统**: 热门话题和标签分类
- **关注机制**: 关注感兴趣的用户

## 🏗️ 技术架构

### 前端技术栈
- **框架**: 微信小程序原生开发
- **UI组件**: 自定义组件库
- **数据可视化**: Canvas API绘制图表
- **动画**: CSS3 + 微信动画API
- **状态管理**: 页面级状态 + 全局数据

### 后端服务
- **云开发**: 微信云开发平台
- **云函数**: Node.js云函数处理业务逻辑
- **云数据库**: MongoDB文档数据库
- **云存储**: 静态资源和用户文件存储

### AI服务集成
- **情感分析**: 基于规则的情绪分析引擎
- **模式识别**: 时间序列分析和关联规则挖掘
- **个性化推荐**: 基于用户行为的建议生成
- **内容审核**: 社区内容安全过滤

## 📁 项目结构

```
emotion-miniprogram/
├── pages/                    # 页面文件
│   ├── index/               # 首页-情绪记录
│   ├── analysis/            # 分析页面
│   ├── profile/             # 个人中心
│   └── community/           # 社区页面
├── components/              # 自定义组件（预留）
├── utils/                   # 工具函数
│   ├── cloudService.js      # 云服务工具类
│   └── achievementSystem.js # 成就系统
├── cloudfunctions/          # 云函数
│   ├── emotion-analysis/    # 情绪分析云函数
│   ├── user-data/          # 用户数据管理
│   └── community/          # 社区功能
├── app.js                  # 应用入口
├── app.json                # 应用配置
├── app.wxss                # 全局样式
├── database.json           # 数据库设计
└── project.config.json     # 项目配置
```

## 🚀 快速开始

### 环境要求
- 微信开发者工具 >= 1.06.0
- 微信基础库 >= 2.10.0  
- 小程序AppID: `wxf2a1defe4093ab24` ✅
- 云环境ID: `cloud1-8g0nzxjxe1f94684` ✅

### 🎯 一键部署（推荐）
项目已配置完整的自动化部署流程：

```bash
# 1. 进入项目目录
cd /Users/peakom/Documents/work/emotion-miniprogram

# 2. 运行自动化部署脚本
./deploy.sh

# 3. 按照脚本提示完成云函数上传
```

### 📋 手动部署步骤
如需手动部署，请参考：
- [完整部署指南](./deploy-guide.md) - 详细的步骤说明
- [云函数上传指南](./云函数上传指南.md) - 云函数部署专门指南
- [部署检查清单](./部署检查清单.md) - 上线前检查项

### 🧪 测试和验证
```javascript
// 在微信开发者工具控制台运行以下脚本：

// 1. 生产环境配置检查
// 运行 production-checklist.js 脚本内容

// 2. 云函数功能测试  
// 运行 云函数测试.js 脚本内容

// 3. 数据库初始化
// 在云开发控制台运行 database-init.js 脚本
```

## 📊 数据库设计

### 核心数据表
- `emotion_records`: 情绪记录表
- `emotion_analysis`: AI分析结果表
- `user_settings`: 用户设置表
- `community_posts`: 社区动态表
- `post_likes`: 点赞记录表
- `post_comments`: 评论记录表
- `user_follows`: 关注关系表
- `topic_stats`: 话题统计表

详细设计见 `database.json`

## 🎯 核心特性

### 情绪记录
- **表情模式**: 8种基础情绪表情选择
- **颜色模式**: 通过颜色表达情绪状态
- **天气模式**: 用天气比喻当前心情
- **强度设置**: 1-10级强度滑块
- **文字描述**: 详细情绪描述和触发因素

### 数据分析
- **趋势图表**: 7天/30天情绪趋势线图
- **统计分布**: 情绪类型饼图和频次统计
- **时间模式**: 不同时段的情绪分布
- **AI洞察**: 个性化分析和改善建议

### 成就系统
- **21种成就**: 涵盖记录、坚持、多样性等维度
- **10个等级**: 从新手到传奇的成长路径
- **即时反馈**: 解锁成就时的祝贺提示
- **推荐机制**: 基于进度的成就推荐

### 隐私保护
- **三级设置**: 基础/匿名/透明三种模式
- **本地优先**: 敏感数据本地存储
- **加密传输**: 云端数据加密处理
- **用户控制**: 完全的数据删除权限

## 🔧 开发规范

### 代码规范
- 使用ES6+语法特性
- 遵循微信小程序开发规范
- 组件化和模块化开发
- 统一的错误处理机制

### 性能优化
- 图片懒加载和压缩
- 分包加载策略
- 数据缓存机制
- 云函数并发优化

### 安全考虑
- 输入数据验证和过滤
- SQL注入和XSS防护
- 用户权限验证
- 敏感信息加密存储

## 📝 版本记录

### v1.0.0 (2025-08-06) ✅ 正式完成版
- ✅ 完成核心情绪记录功能
- ✅ 实现数据可视化分析
- ✅ 集成用户系统和个人中心  
- ✅ 开发社区互动功能
- ✅ 配置云开发环境和云函数
- ✅ 实现成就系统 (21个成就+10个等级)
- ✅ 完整的错误处理和性能优化
- ✅ 全套部署脚本和文档
- ✅ 安全防护和输入验证
- ✅ 生产环境就绪状态

### 技术亮点 🏆
- ✅ 完整的自动化部署流程
- ✅ 智能错误处理和降级机制
- ✅ Canvas高性能数据可视化  
- ✅ 多层次安全防护体系
- ✅ 离线功能和云端同步
- ✅ 响应式设计和用户体验优化

## 🤝 贡献指南

欢迎贡献代码、提出建议或报告问题：

1. Fork 本项目
2. 创建特性分支 (`git checkout -b feature/AmazingFeature`)
3. 提交更改 (`git commit -m 'Add some AmazingFeature'`)
4. 推送到分支 (`git push origin feature/AmazingFeature`)
5. 开启 Pull Request

## 📄 许可证

本项目采用 MIT 许可证 - 查看 [LICENSE](LICENSE) 文件了解详情

## 📞 联系方式

如有问题或建议，请通过以下方式联系：

- 项目Issues: [GitHub Issues](https://github.com/your-repo/issues)
- 邮箱: your-email@example.com

---

**情绪疗愈小程序** - 让每一次情绪记录都成为成长的见证 💚